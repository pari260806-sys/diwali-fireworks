<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Diwali â€” Interactive Card</title>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&family=Pacifico&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b1020;
      --accent:#ffcc00;
      --soft:#ffd89b;
      --rangoli1:#ff6b6b;
      --rangoli2:#ffd166;
      --rangoli3:#6bc7ff;
    }
    html,body{height:100%;margin:0;font-family:'Baloo 2',system-ui,Arial;background:radial-gradient(ellipse at 20% 10%, rgba(255,200,100,0.05), transparent 10%), linear-gradient(180deg,var(--bg),#071226 60%);color:#fff;overflow:hidden}
    .stage{position:relative;width:100%;height:100vh;display:grid;place-items:center;gap:18px}

    /* Top candles (kandel) */
    .candles{position:absolute;top:18px;left:50%;transform:translateX(-50%);display:flex;gap:18px;z-index:10}
    .diya{width:70px;height:70px;display:flex;align-items:center;justify-content:center;filter:drop-shadow(0 6px 10px rgba(0,0,0,0.6));}
    .diya svg{width:100%;height:100%}
    .flame{transform-origin:center bottom;animation:flicker 1s infinite}
    @keyframes flicker{0%{transform:translateY(0) scaleY(1)}50%{transform:translateY(-4px) scaleY(0.92)}100%{transform:translateY(0) scaleY(1)}}

    /* Happy Diwali text */
    .hero{display:flex;flex-direction:column;align-items:center;gap:10px;z-index:5}
    .title{font-family:'Pacifico',cursive;font-size:64px;letter-spacing:1px;color:var(--soft);text-shadow:0 6px 18px rgba(255,200,120,0.15);transform:translateY(0);animation:popIn 900ms ease both}
    @keyframes popIn{0%{opacity:0;transform:translateY(-18px) scale(0.9)}100%{opacity:1;transform:translateY(0) scale(1)}}
    .subtitle{font-size:18px;color:#f3e6c6;opacity:0.9}

    /* Text sparkle */
    .sparkles{position:absolute;inset:0;pointer-events:none}
    .sparkle{position:absolute;width:10px;height:10px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#fff,#ffd89b 40%,transparent 60%);opacity:0.9;filter:blur(4px);mix-blend-mode:screen}

    /* Rangoli at bottom */
    .rangoli-wrap{position:absolute;bottom:12px;left:50%;transform:translateX(-50%);z-index:4}
    .rangoli{width:420px;height:140px}

    /* Kids playing (simple animated silhouettes) */
    .kids{position:absolute;bottom:180px;left:50%;transform:translateX(-50%);display:flex;gap:18px;z-index:3}
    .kid{width:72px;height:72px;border-radius:50%;background:linear-gradient(180deg,#ffd6ae,#ffc38b);display:flex;align-items:flex-end;justify-content:center;padding-bottom:6px;box-shadow:0 6px 18px rgba(0,0,0,0.4);animation:play 3s ease-in-out infinite}
    .kid:nth-child(2){animation-delay:0.3s}
    .kid:nth-child(3){animation-delay:0.6s}
    .kid .face{width:36px;height:28px;border-radius:20px;background:#fff;display:flex;align-items:center;justify-content:center;font-size:12px;color:#333}
    @keyframes play{0%{transform:translateY(0)}50%{transform:translateY(-20px)}100%{transform:translateY(0)}}

    /* Controls */
    .controls{position:absolute;right:18px;top:18px;display:flex;flex-direction:column;gap:8px;z-index:11}
    .btn{background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.08);padding:8px 12px;border-radius:10px;color:#fff;backdrop-filter:blur(6px);cursor:pointer}
    .btn:active{transform:translateY(1px)}

    /* Footer sweets */
    .sweets{position:absolute;bottom:18px;right:18px;display:flex;gap:10px;z-index:6}
    .sweet{width:56px;height:36px;border-radius:8px;background:linear-gradient(90deg,#ffb3b3,#ffd9a6);display:flex;align-items:center;justify-content:center;font-size:12px;color:#3b2b25;padding:6px;box-shadow:0 6px 12px rgba(0,0,0,0.35)}

    /* canvas full-screen for fireworks */
    #fireworksCanvas{position:absolute;inset:0;width:100%;height:100%;z-index:1;pointer-events:auto}

    /* responsive tweaks */
    @media(max-width:640px){.title{font-size:38px}.rangoli{width:300px;height:110px}.kid{width:54px;height:54px}}
  </style>
</head>
<body>
  <div class="stage">
    <canvas id="fireworksCanvas"></canvas>

    <div class="candles" aria-hidden>
      <!-- three diyas -->
      <div class="diya">
        <svg viewBox="0 0 64 64">
          <g transform="translate(0,6)">
            <path d="M32 46c12 0 22-6 22-12 0-7-10-14-22-14S10 27 10 34c0 6 10 12 22 12z" fill="#4d2b00"/>
            <ellipse cx="32" cy="34" rx="14" ry="8" fill="#ffb84d" opacity="0.25"/>
            <g class="flame">
              <path d="M32 8c6 6 8 10 2 18-8 11-12 5-14 1-3-5 4-20 12-19z" fill="#ffd166"/>
              <path d="M32 10c3 3 4 6 1 11-4 6-7 3-8 1-2-3 2-11 7-12z" fill="#ff6b6b"/>
            </g>
          </g>
        </svg>
      </div>
      <div class="diya">
        <svg viewBox="0 0 64 64">
          <g transform="translate(0,6)">
            <path d="M32 46c12 0 22-6 22-12 0-7-10-14-22-14S10 27 10 34c0 6 10 12 22 12z" fill="#5a3000"/>
            <ellipse cx="32" cy="34" rx="14" ry="8" fill="#ffd89b" opacity="0.2"/>
            <g class="flame">
              <path d="M32 8c6 6 8 10 2 18-8 11-12 5-14 1-3-5 4-20 12-19z" fill="#ffd166"/>
              <path d="M32 10c3 3 4 6 1 11-4 6-7 3-8 1-2-3 2-11 7-12z" fill="#ff8f00"/>
            </g>
          </g>
        </svg>
      </div>
      <div class="diya">
        <svg viewBox="0 0 64 64">
          <g transform="translate(0,6)">
            <path d="M32 46c12 0 22-6 22-12 0-7-10-14-22-14S10 27 10 34c0 6 10 12 22 12z" fill="#6b3b00"/>
            <ellipse cx="32" cy="34" rx="14" ry="8" fill="#ffe0b2" opacity="0.2"/>
            <g class="flame">
              <path d="M32 8c6 6 8 10 2 18-8 11-12 5-14 1-3-5 4-20 12-19z" fill="#fff2cc"/>
              <path d="M32 10c3 3 4 6 1 11-4 6-7 3-8 1-2-3 2-11 7-12z" fill="#ffb84d"/>
            </g>
          </g>
        </svg>
      </div>
    </div>

    <div class="hero">
      <div class="title">Happy Diwali</div>
      <div class="subtitle">Lights, rangoli, sweets â€” and a sky full of fireworks!</div>
    </div>

    <div class="kids" aria-hidden>
      <div class="kid"><div class="face">ðŸ˜Š</div></div>
      <div class="kid"><div class="face">ðŸ˜„</div></div>
      <div class="kid"><div class="face">ðŸ˜ƒ</div></div>
    </div>

    <div class="sweets">
      <div class="sweet">Ladoo</div>
      <div class="sweet">Barfi</div>
      <div class="sweet">Jalebi</div>
    </div>

    <div class="controls">
      <button id="burstBtn" class="btn">Burst Fireworks</button>
      <button id="toggleAuto" class="btn">Toggle Auto Fireworks</button>
      <button id="saveBtn" class="btn">Save as PNG</button>
    </div>

    <div class="rangoli-wrap">
      <svg class="rangoli" viewBox="0 0 420 140" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <radialGradient id="g1"><stop offset="0%" stop-color="#fff" stop-opacity="0.9"/><stop offset="100%" stop-color="#ffd89b" stop-opacity="0"/></radialGradient>
        </defs>
        <g transform="translate(210,70)">
          <!-- central flower -->
          <g id="flower" transform="scale(1)">
            <circle r="20" fill="var(--rangoli2)" />
            <g id="petals">
              <path d="M0 -36 C12 -28 28 -28 36 -16 C28 -8 12 -8 0 0 C-12 -8 -28 -8 -36 -16 C-28 -28 -12 -28 0 -36 Z" fill="var(--rangoli1)" transform="rotate(0)" />
              <path d="M0 -36 C12 -28 28 -28 36 -16 C28 -8 12 -8 0 0 C-12 -8 -28 -8 -36 -16 C-28 -28 -12 -28 0 -36 Z" fill="var(--rangoli3)" transform="rotate(45)" />
              <path d="M0 -36 C12 -28 28 -28 36 -16 C28 -8 12 -8 0 0 C-12 -8 -28 -8 -36 -16 C-28 -28 -12 -28 0 -36 Z" fill="#f79cc4" transform="rotate(90)" />
              <path d="M0 -36 C12 -28 28 -28 36 -16 C28 -8 12 -8 0 0 C-12 -8 -28 -8 -36 -16 C-28 -28 -12 -28 0 -36 Z" fill="#ffc9de" transform="rotate(135)" />
            </g>
          </g>
          <!-- rings -->
          <circle r="48" fill="none" stroke="#ffd89b" stroke-width="4" opacity="0.6" />
          <circle r="74" fill="none" stroke="#ffd9a6" stroke-width="6" opacity="0.35" stroke-dasharray="6 8" />
        </g>
      </svg>
    </div>

    <div class="sparkles" id="sparkleLayer"></div>
  </div>

  <script>
    // FIREWORKS CANVAS
    const canvas = document.getElementById('fireworksCanvas');
    const ctx = canvas.getContext('2d');
    let W = canvas.width = innerWidth;
    let H = canvas.height = innerHeight;
    let particles = [];
    let auto = true;

    function resize(){W = canvas.width = innerWidth; H = canvas.height = innerHeight}
    addEventListener('resize', resize);

    class Particle{
      constructor(x,y,clr,vel,life){
        this.x = x; this.y = y; this.vx = vel.x; this.vy = vel.y;
        this.r = Math.random()*2.6+1.2; this.life = life; this.age=0; this.clr = clr;
      }
      update(dt){
        this.vy += 0.03; // gravity
        this.x += this.vx*dt; this.y += this.vy*dt; this.age += dt;
      }
      draw(ctx){
        ctx.beginPath();
        ctx.globalCompositeOperation = 'lighter';
        ctx.fillStyle = this.clr;
        ctx.arc(this.x,this.y,this.r,0,Math.PI*2);
        ctx.fill();
      }
    }

    function randColor(){
      const palette = ['#ffd166','#ff6b6b','#6bc7ff','#9b5cff','#ff9f43','#ffd1dc'];
      return palette[Math.floor(Math.random()*palette.length)];
    }

    function burst(x,y,size=80){
      const clr = randColor();
      for(let i=0;i<size;i++){
        const ang = Math.random()*Math.PI*2;
        const sp = Math.random()*4+1.6;
        const vel = {x:Math.cos(ang)*sp, y:Math.sin(ang)*sp};
        particles.push(new Particle(x,y,clr,vel,Math.random()*120+60));
      }
    }

    function update(){
      ctx.clearRect(0,0,W,H);
      // translucent bg for trails
      ctx.fillStyle = 'rgba(6,10,18,0.25)';
      ctx.fillRect(0,0,W,H);
      for(let i=particles.length-1;i>=0;i--){
        const p = particles[i];
        p.update(1);
        p.draw(ctx);
        if(p.age>150){particles.splice(i,1)}
      }
      requestAnimationFrame(update);
    }
    update();

    // auto bursts
    setInterval(()=>{if(auto){burst(Math.random()*W,Math.random()*H*0.6,40+Math.floor(Math.random()*80))}},900);

    // user interactions
    canvas.addEventListener('click', (e)=>{const rect=canvas.getBoundingClientRect();burst(e.clientX,e.clientY,60)});
    document.getElementById('burstBtn').addEventListener('click', ()=>{burst(W*0.5,H*0.4,200)});
    document.getElementById('toggleAuto').addEventListener('click', function(){auto=!auto; this.textContent = auto? 'Toggle Auto Fireworks':'Auto Off'});

    // sparkles layer decor
    const sparkleLayer = document.getElementById('sparkleLayer');
    function makeSparkles(){
      for(let i=0;i<22;i++){
        const s = document.createElement('div');s.className='sparkle';
        s.style.left = Math.random()*100+'%';s.style.top=Math.random()*100+'%';
        const size = 6+Math.random()*18;s.style.width=s.style.height=size+'px';
        s.style.opacity = 0.3+Math.random()*0.9; s.style.transform='translate(-50%,-50%)';
        sparkleLayer.appendChild(s);
        // float animation
        s.animate([{transform:'translate(-50%,-50%) scale(0.6)'},{transform:'translate(-50%,-50%) scale(1.2)'}],{duration:1500+Math.random()*2000,iterations:Infinity,direction:'alternate'});
      }
    }
    makeSparkles();

    // Save snapshot as PNG
    document.getElementById('saveBtn').addEventListener('click', ()=>{
      const link = document.createElement('a');
      link.download = 'diwali_card.png';
      link.href = canvas.toDataURL('image/png');
      link.click();
    });

    // gentle ambient sound (optional) - user can enable by clicking (browsers require interaction)
    let audio;
    function makeAudio(){
      try{
        audio = new Audio();
        // small encoded silent base64 placeholder to avoid external file; user can replace with real tune.
        audio.src = 'data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAAAA==';
        audio.loop = true; audio.volume = 0.15;
      }catch(e){audio=null}
    }
    makeAudio();

    // playful floating kids path (motion path effect)
    const kids = document.querySelectorAll('.kid');
    kids.forEach((k,i)=>{
      const dur = 4000 + Math.random()*2000;
      k.animate([{transform:'translate(-50px,0)'},{transform:'translate(50px,-8px)'},{transform:'translate(-50px,0)'}],{duration:dur,iterations:Infinity,easing:'ease-in-out',delay:i*200});
    });

    // keyboard shortcut: press F to big fireworks
    addEventListener('keydown',(e)=>{if(e.key.toLowerCase()==='f'){burst(Math.random()*W,H*0.35,300)}});

    // Accessibility: announce greeting
    const live = document.createElement('div');live.setAttribute('aria-live','polite');live.style.position='absolute';live.style.left='-9999px';live.textContent='Happy Diwali! Wishing you light and joy.';document.body.appendChild(live);
  </script>
</body>
</html>
